# ユースケース: 販売商品を変更する

## 概要
管理者が自動販売機内の販売商品を入替え、変更内容をシステムに登録・反映させるまでの流れ。

## アクター
- 管理者

## 事前条件
- 管理者が自動販売機の管理・解錠権限を有している
- 新たな販売商品の在庫が準備されている

## 事後条件
- 新しい販売商品が自動販売機内にセットされ、システムにも正しく登録・反映される

## 基本フロー

| フローID | 内容 |
|:---:|:-----|
| BF-1 | 管理者は自動販売機の施錠を解除し、補充・設定用ドアを開ける。 |
| BF-2 | システムまたは現物確認で現在販売されている商品のリストと配置を確認する。 |
| BF-3 | 販売を終了する商品を取り出し、新たな販売商品と差替え・補充する。 |
| BF-4 | 必要に応じて商品ごとの価格や商品名、ボタン・ディスプレイの表示などを設定・変更する。 |
| BF-5 | システムに商品変更内容を登録・入力する（自動連動または手動入力）。 |
| BF-6 | 管理者は商品の配置・数量・表示など最終確認を行い、ドアを施錠する。 |
| BF-7 | システム（または管理者）は変更日時や担当者・変更内容等を履歴として記録する。 |

### 分岐
- 【BF-3】で商品収納部に商品が残っており交換不能、または新商品がうまくセットできない場合 → 例外フロー【EF-1】へ
- 【BF-4】や【BF-5】で設定や登録時にエラーが発生した場合 → 例外フロー【EF-2】へ

## 例外フロー

| フローID | 内容 |
|:---:|:-----|
| EF-1-1 | 商品収納部のトラブル・満杯・残品等で新商品への切替ができない場合、管理者は現場措置またはメンテナンス担当へ連絡する。 |
| EF-1-2 | 対象商品の交換を中断し、必要に応じて該当行のみ現状維持とする。 |

| フローID | 内容 |
|:---:|:-----|
| EF-2-1 | システムへの商品情報登録や、価格・表示情報変更に失敗した場合、再登録または紙帳票記入を行う。|
| EF-2-2 | 必要に応じて管理者または本部へ報告し、処理終了。|

## 備考
- 商品変更後は在庫数や価格・キャンペーン情報等も同時に調整・登録する場合がある。
- 一部機種ではネットワーク経由で本部システムから商品設定が可能なものもある。
- 商品名や画像ラベル、ボタンプレート等の物理的な入替え・貼り替えなども必要な場合がある。

